/* Modal Fixes for Bootstrap 5 - AGGRESSIVE OVERRIDE */
/* Исключаем модальное окно уведомлений из глобальных правил */
.modal:not(#notificationsModal),
.modal.show:not(#notificationsModal),
.modal[style*="z-index"]:not(#notificationsModal) {
    z-index: 9999 !important;
}

.modal-backdrop:not(#notificationsModal + .modal-backdrop),
.modal-backdrop.show:not(#notificationsModal + .modal-backdrop),
.modal-backdrop[style*="z-index"]:not(#notificationsModal + .modal-backdrop) {
    z-index: 9998 !important;
}

.modal-content:not(#notificationsModal .modal-content),
.modal-content[style*="z-index"]:not(#notificationsModal .modal-content) {
    z-index: 10000 !important;
    position: relative !important;
}

.modal-dialog:not(#notificationsModal .modal-dialog),
.modal-dialog[style*="z-index"]:not(#notificationsModal .modal-dialog) {
    z-index: 10001 !important;
}

.btn-close:not(#notificationsModal .btn-close),
.modal .btn-close:not(#notificationsModal .btn-close),
.modal-header .btn-close:not(#notificationsModal .btn-close),
button.btn-close:not(#notificationsModal .btn-close) {
    z-index: 10002 !important;
    position: relative !important;
    cursor: pointer !important;
    pointer-events: auto !important;
}

/* Force all modals to be above everything */
.modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
}

/* Ensure backdrop is behind modal */
.modal-backdrop {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
}

/* Specific fix for profile modals */
#allAchievementsModal,
#allAchievementsModal.show {
    z-index: 9999 !important;
}

#allAchievementsModal .modal-content {
    z-index: 10000 !important;
}

#allAchievementsModal .modal-dialog {
    z-index: 10001 !important;
}

#allAchievementsModal .btn-close {
    z-index: 10002 !important;
}

/* Specific fix for notifications modal - ensure it's above navbar */
#notificationsModal,
#notificationsModal.show {
    z-index: 1050 !important;
}

#notificationsModal .modal-content {
    z-index: 1055 !important;
}

#notificationsModal .modal-dialog {
    z-index: 1055 !important;
}

#notificationsModal .btn-close {
    z-index: 1056 !important;
}

#notificationsModal + .modal-backdrop {
    z-index: 1045 !important;
}

/* Override any inline styles */
.modal[style] {
    z-index: 9999 !important;
}

.modal-backdrop[style] {
    z-index: 9998 !important;
}

/* Ensure modal is properly positioned */
.modal-dialog-centered {
    display: flex !important;
    align-items: center !important;
    min-height: calc(100% - 1rem) !important;
}

/* Force backdrop click */
.modal-backdrop {
    pointer-events: auto !important;
}

/* Additional Bootstrap 5 specific fixes */
.modal.fade .modal-dialog {
    transition: transform 0.3s ease-out !important;
}

.modal.show .modal-dialog {
    transform: none !important;
}

/* FORCE z-index with !important and higher specificity */
body .modal,
html body .modal,
.modal.show,
.modal[style*="z-index"],
.modal[style*="z-index:"] {
    z-index: 9999 !important;
}

body .modal-backdrop,
html body .modal-backdrop,
.modal-backdrop.show,
.modal-backdrop[style*="z-index"],
.modal-backdrop[style*="z-index:"] {
    z-index: 9998 !important;
}

body .modal-content,
html body .modal-content,
.modal-content[style*="z-index"],
.modal-content[style*="z-index:"] {
    z-index: 10000 !important;
}

body .modal-dialog,
html body .modal-dialog,
.modal-dialog[style*="z-index"],
.modal-dialog[style*="z-index:"] {
    z-index: 10001 !important;
}

body .btn-close,
html body .btn-close,
.modal .btn-close,
.modal-header .btn-close,
button.btn-close {
    z-index: 10002 !important;
}

/* Override any inline styles with maximum specificity */
.modal[style] {
    z-index: 9999 !important;
}

.modal-backdrop[style] {
    z-index: 9998 !important;
}

.modal-content[style] {
    z-index: 10000 !important;
}

.modal-dialog[style] {
    z-index: 10001 !important;
}

/* Force backdrop to be behind modal */
.modal-backdrop {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    z-index: 9998 !important;
}

/* Force modal to be above backdrop */
.modal {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    z-index: 9999 !important;
}

/* MAXIMUM SPECIFICITY OVERRIDE */
html body .modal,
html body .modal.show,
html body .modal[style],
html body .modal[style*="z-index"],
html body .modal[style*="z-index:"] {
    z-index: 9999 !important;
}

html body .modal-backdrop,
html body .modal-backdrop.show,
html body .modal-backdrop[style],
html body .modal-backdrop[style*="z-index"],
html body .modal-backdrop[style*="z-index:"] {
    z-index: 9998 !important;
}

html body .modal-content,
html body .modal-content[style],
html body .modal-content[style*="z-index"],
html body .modal-content[style*="z-index:"] {
    z-index: 10000 !important;
}

html body .modal-dialog,
html body .modal-dialog[style],
html body .modal-dialog[style*="z-index"],
html body .modal-dialog[style*="z-index:"] {
    z-index: 10001 !important;
}

html body .btn-close,
html body .modal .btn-close,
html body .modal-header .btn-close,
html body button.btn-close {
    z-index: 10002 !important;
}

/* Force all modals to be above everything (except notifications modal) */
*[class*="modal"]:not([id*="notificationsModal"]) {
    z-index: 9999 !important;
}

*[class*="modal-backdrop"]:not([id*="notificationsModal"] + *) {
    z-index: 9998 !important;
}

/* ATTRIBUTE SELECTOR OVERRIDE - MAXIMUM PRIORITY */
[class*="modal"]:not([class*="modal-backdrop"]):not([id*="notificationsModal"]) {
    z-index: 9999 !important;
}

[class*="modal-backdrop"]:not([id*="notificationsModal"] + *) {
    z-index: 9998 !important;
}

/* Force z-index with attribute selectors (except notifications modal) */
[class*="modal-content"]:not([id*="notificationsModal"] *) {
    z-index: 10000 !important;
}

[class*="modal-dialog"]:not([id*="notificationsModal"] *) {
    z-index: 10001 !important;
}

[class*="btn-close"]:not([id*="notificationsModal"] *) {
    z-index: 10002 !important;
}

/* Bootstrap 5 specific overrides (except notifications modal) */
.fade.modal:not(#notificationsModal) {
    z-index: 9999 !important;
}

.fade.modal-backdrop:not(#notificationsModal + .modal-backdrop) {
    z-index: 9998 !important;
}

.show.modal:not(#notificationsModal) {
    z-index: 9999 !important;
}

.show.modal-backdrop:not(#notificationsModal + .modal-backdrop) {
    z-index: 9998 !important;
}

/* EMERGENCY BACKDROP HIDE - if all else fails */
.modal.show + .modal-backdrop,
.modal.show ~ .modal-backdrop {
    display: none !important;
    opacity: 0 !important;
    visibility: hidden !important;
}

/* Force modal to be visible and clickable (except notifications modal) */
.modal.show:not(#notificationsModal) {
    visibility: visible !important;
    opacity: 1 !important;
    pointer-events: auto !important;
}

/* Ensure modal content is above everything (except notifications modal) */
.modal.show:not(#notificationsModal) .modal-content {
    position: relative !important;
    z-index: 10000 !important;
}

/* Force close button to be clickable (except notifications modal) */
.modal.show:not(#notificationsModal) .btn-close {
    position: relative !important;
    z-index: 10002 !important;
    pointer-events: auto !important;
    cursor: pointer !important;
}
